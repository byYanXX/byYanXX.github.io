---
layout: post
title: "「湖仓一体#01」认识湖仓一体"
---

## 0. 写在前面
面对新东西，我总是习惯闭着眼睛问如下几个问题：

1. 它是什么？
2. 它为什么存在？解决了什么问题？
3. 它要解决的问题为什么会存在？
4. 该问题除了它，还能由谁解决？
5. 它是如何解决问题的？
6. 除了解决最痛的问题，它还做了哪些事儿？
7. 它又引入了哪些问题，局限性在哪儿？
8. 相比其他解决方案，它的优势在哪儿？
9. 学习它的前置知识储备？
10. ……


## 1. Gemini tells me:

> ⚠️ *超浓 AI 味儿预警……*

### 1. 它是什么？
湖仓一体 (Lakehouse) 是一种新型的数据存储架构。它就像是“数据湖”的低成本存储与“数据仓库”的高性能管理生下的“混血儿”。它直接在用于数据湖的廉价存储（如 S3、OSS）上，实现类似数据仓库的数据结构和数据管理功能。

### 2. 它为什么存在？解决了什么问题？
过去我们要么用数据湖（存海量原始数据，但乱、慢、没事务），要么用数据仓库（快、规范，但贵、存不下非结构化数据）。它解决的核心问题是：数据重复建设和“孤岛”问题。不用再为了分析数据，辛苦地把数据从湖里搬到仓里（ETL），省时省钱省心。

### 3. 它要解决的问题为什么会存在？
因为数据爆发和需求多样化。
- 数据量大：数仓存不起。
- 数据类型杂：数仓处理不了视频、图片、日志等原始数据。
- 实时性要求高：传统数仓的批量更新太慢。

### 4. 该问题除了它，还能由谁解决？
在它出现前，主流方案是“湖仓并存”。
- Lambda 架构：搞两套系统，实时的一套，离线的一套。
- 数据联邦 (Data Federation)：通过插件让查询引擎同时查湖和仓，但不解决数据存储层面的割裂。

### 5. 它是如何解决问题的？
它通过在存储层之上加了一个“元数据管理/事务层”（如 Delta Lake, Iceberg, Hudi）。这一层赋予了廉价存储以往不具备的能力，比如：ACID 事务（保证数据不出错）、版本控制（数据快照回滚）和索引优化等。

### 6. 除了解决最痛的问题，它还做了哪些事儿？
- 支持 AI 和机器学习：算法模型可以直接读取湖里的原始数据，不用等数仓清洗。
- 流批一体：一套代码、一套数据，既能处理实时流数据，也能跑离线批处理。
- 开放性：数据格式通常是 Parquet 或 Avro 等开放格式，不被特定软件锁死。

### 7. 它又引入了哪些问题，局限性在哪儿？
- 复杂度增加：管理 Iceberg 或 Hudi 这种格式需要额外的维护成本。
- 性能天花板：虽然快，但在极致的极短延迟查询上，目前仍稍逊于纯粹的高性能物理数仓。
- 技术门槛：对初学者和运维人员的要求更高。

### 8. 相比其他解决方案，它的优势在哪儿？
- 性价比极高：用对象存储的价格，换取接近数仓的体验。
- 架构极简：从“湖+仓”两套班子，变成“湖仓一体”一套架构，维护成本骤减。
- 面向未来：它天然适配云原生环境和大数据量的 AI 时代。

### 9. 学习它的前置知识储备？

- **存储层基础：对象存储 (Object Storage)**
    
    湖仓一体是盖在“湖”上的，你得知道地基长啥样。
    - 核心概念：理解什么是 S3 (AWS)、OSS (阿里云) 或 HDFS。
    - 文件格式：重点了解 Parquet 和 Avro（列式存储 vs 行式存储）。湖仓一体的底层数据几乎都是这些格式。
- **核心架构：数据湖 vs 数据仓库**
    
    如果你不知道“旧痛”，就无法理解“新药”的精妙。
    - 数据仓库：了解什么是 Schema-on-write（写入时建模）和 SQL 标准。
    - 数据湖：了解什么是 Schema-on-read（读取时建模）和存储与计算分离。

- **查询引擎与计算框架**
    
    湖仓一体本身不计算，它需要引擎来“驱动”。
    - SQL 能力：必须熟练掌握 SQL，因为湖仓一体的核心目标之一就是让湖也能用 SQL 丝滑查询。
    - 主流引擎：至少了解 Spark、Flink 或 Trino (Presto) 其中的一种，知道它们是怎么读取数据的。

- **数据库底层原理（进阶关键）**
    
    这是区分“调包侠”和“架构师”的分水岭。
    - ACID 事务：理解什么是原子性、一致性、隔离性、持久性。湖仓一体通过元数据管理实现这些。
    - 并发控制：简单了解 乐观锁 (Optimistic Concurrency Control)，这是主流湖仓格式（如 Iceberg）解决多人同时读写冲突的常用手段。


## 2. 未完待续……